<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>reveal.js</title>

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/league.css">
    <link rel="stylesheet" href="css/custom.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!--Font-Awesome-->
    <script defer src="lib/externals/fontawesome-all.min.js"></script>

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>
<body>
<div class="reveal">
    <div class="slides">

        <section>
            <h2>Un peu de physique</h2>
        </section>
        <section>
            Un son musical
            <p>
            <ul>
                <li>Amplitude</li>
                <li>Fréquence</li>
                <li>Timbre</li>
            </ul>
            </p>
            <p>
            <div class="simpleWave">
                <div id="waveform">
                    <div id="waveform1" class="fragment"></div>
                    <div id="waveform2" class="fragment"></div>
                </div>
                <div class="zoom-slide">
                    <div class="minus">
                        <i class="fas fa-search-minus"></i>
                    </div>
                    <div class="slider">
                        <input id="slider" type="range" min="1" max="5000" value="1" style="width: 100%"/>
                    </div>
                    <div class="plus">
                        <i class="fas fa-search-plus"></i>
                    </div>
                </div>
            </div>
            </p>
        </section>
        <section>
            <section>
                <h3>Fréquence</h3>
                A4=440Hz
                <img src="assets/registre.jpg" width="850" height="520">
            </section>
            <section>
                <div class="fragment visible fade-out" data-fragment-index="1">(Petite parenthèse historique)</div>
                <div class="fragment fade-up" data-fragment-index="1">
                    <div class="fragment fade-out" data-fragment-index="3">
                        <span class="fragment highlight-red" data-fragment-index="2">Ut</span> queant laxis
                        <span class="fragment highlight-red" data-fragment-index="2">re</span>sonare fibris <br>
                        <span class="fragment highlight-red" data-fragment-index="2">mi</span>ra gestorum
                        <span class="fragment highlight-red" data-fragment-index="2">fa</span>muli tuorum, <br>
                        <span class="fragment highlight-red" data-fragment-index="2">sol</span>ve polluti
                        <span class="fragment highlight-red" data-fragment-index="2">la</span>bii reatum, <br>
                        <span class="fragment highlight-red" data-fragment-index="2">S</span>ancte
                        <span class="fragment highlight-red" data-fragment-index="2">I</span>ohannes.
                    </div>
                </div>
                <div class="fragment fade-up" data-fragment-index="3">
                    <table>
                        <tr>
                            <td>France, Italie, Espagne, Portugal</td>
                            <td>la</td>
                            <td>si</td>
                            <td>do</td>
                            <td>ré</td>
                            <td>mi</td>
                            <td>fa</td>
                            <td>sol</td>
                        </tr>
                        <tr>
                            <td>Angleterre</td>
                            <td>A</td>
                            <td>B</td>
                            <td>C</td>
                            <td>D</td>
                            <td>E</td>
                            <td>F</td>
                            <td>G</td>
                        </tr>
                    </table>
                </div>
            </section>
            <section>
                <h4>Echelles dans la musique occidentale</h4>
                <div>
                    <table class="echelle">
                        <tr>
                            <td>do</td>
                            <td></td>
                            <td>ré</td>
                            <td></td>
                            <td>mi</td>
                            <td></td>
                            <td>fa</td>
                            <td></td>
                            <td>sol</td>
                            <td></td>
                            <td>la</td>
                            <td></td>
                            <td>si</td>
                            <td></td>
                            <td>do</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>1T</td>
                            <td></td>
                            <td>1T</td>
                            <td></td>
                            <td>&frac12;T</td>
                            <td></td>
                            <td>1T</td>
                            <td></td>
                            <td>1T</td>
                            <td></td>
                            <td>1T</td>
                            <td></td>
                            <td>&frac12;T</td>
                            <td></td>
                        </tr>
                    </table>
                </div>
                <div>
                    <p>&#9839; = +&frac12; ton    &nbsp;&nbsp;&mdash;&nbsp;&nbsp;    &#9837; = -&frac12; ton</p>
                </div>
                <div>
                    <svg id="piano-keyboard" width="700px" height="210">
                    <g class="white">
                        <rect x="0" y="0" width="100" height="210"/>
                        <rect x="100" y="0" width="100" height="210"/>
                        <rect x="200" y="0" width="100" height="210"/>
                        <rect x="300" y="0" width="100" height="210"/>
                        <rect x="400" y="0" width="100" height="210"/>
                        <rect x="500" y="0" width="100" height="210"/>
                        <rect x="600" y="0" width="100" height="210"/>
                        <text x="30" y="200">Do</text>
                        <text x="130" y="200">Ré</text>
                        <text x="230" y="200">Mi</text>
                        <text x="330" y="200">Fa</text>
                        <text x="430" y="200">Sol</text>
                        <text x="530" y="200">La</text>
                        <text x="630" y="200">Si</text>
                    </g>
                    <g class="black">
                        <rect x="66" y="0" width="66" height="140"/>
                        <rect x="166" y="0" width="66" height="140"/>
                        <rect x="366" y="0" width="66" height="140"/>
                        <rect x="466" y="0" width="66" height="140"/>
                        <rect x="566" y="0" width="66" height="140"/>
                        <text x="70" y="60">Do&#9839;</text>
                        <text x="170" y="60">Ré&#9839;</text>
                        <text x="370" y="60">Fa&#9839;</text>
                        <text x="470" y="60">Sol&#9839;</text>
                        <text x="570" y="60">La&#9839;</text>
                        <text x="70" y="100">Ré&#9837;</text>
                        <text x="170" y="100">Mi&#9837;</text>
                        <text x="365" y="100">Sol&#9837;</text>
                        <text x="470" y="100">La&#9837;</text>
                        <text x="570" y="100">Si&#9837;</text>
                    </g>
                </svg>
                </div>
                <div> = 12 demi-tons</div>
            </section>
        </section>
        <section>
            <h3>Timbre</h3>
            <div class="timbre">
                <img src="assets/pure-sine.png"
                     class="wave">
                <div class="desc fragment highlight-green"
                     data-audio-src="assets/pure-sine.mp3">Sinusoïde pure
                </div>
                <img src="assets/piano.png"
                     class="wave">
                <div class="desc fragment highlight-green"
                     data-audio-src="assets/piano.mp3">Piano
                </div>
                <img src="assets/guitar.png"
                     class="wave">
                <div class="desc fragment highlight-green"
                     data-audio-src="assets/guitar.mp3">Guitare heavymetal
                </div>
                <img src="assets/square.png"
                     class="wave">
                <div class="desc fragment highlight-green"
                     data-audio-src="assets/square.mp3">Lead Square
                </div>
            </div>
        </section>
        <section>
            <section>
                <h3>Intervalles</h3>
                <table class="intervalles">
                    <tbody>
                    <tr>
                        <th>Intervalle</th>
                        <td>
                            <span class="fragment" data-fragment-index="1">Unisson</span>
                        </td>
                        <td>
                            <span class="fragment" data-fragment-index="4">Seconde</span>
                        </td>
                        <td><span class="fragment" data-fragment-index="3">Tierce</span></td>
                        <td><span class="fragment" data-fragment-index="2">Quarte</span></td>
                        <td><span class="fragment" data-fragment-index="2">Quinte</span></td>
                        <td><span class="fragment" data-fragment-index="3">Sixte</span></td>
                        <td><span class="fragment" data-fragment-index="4">Septième</span></td>
                        <td><span class="fragment" data-fragment-index="1">Octave</span></td>
                    </tr>
                    <tr>
                        <th>entre do et </th>
                        <td>do</td>
                        <td>ré</td>
                        <td>mi</td>
                        <td>fa</td>
                        <td>sol</td>
                        <td>la</td>
                        <td>si</td>
                        <td>do</td>
                    </tr>
                    <tr>
                        <th>tons </th>
                        <td>0</td>
                        <td>1</td>
                        <td>2</td>
                        <td>2&frac12;</td>
                        <td>3&frac12;</td>
                        <td>4&frac12;</td>
                        <td>5&frac12;</td>
                        <td>6</td>
                    </tr>
                    </tbody>
                </table>
            </section>
            <section>
                <h3>Corde</h3>
                <svg id="string" width="800px" height="210">
                    <g class="string-line">
                        <line x1="50" y1="100" x2="750" y2="100"></line>
                        <line x1="50" y1="105" x2="50" y2="95"></line>
                        <line x1="750" y1="105" x2="750" y2="95"></line>

                        <!--Intervalles-->

                        <line x1="400" y1="105" x2="400" y2="95"
                              class="fragment" data-fragment-index="1"></line>
                        <line x1="516.66" y1="105" x2="516.66" y2="95"
                              class="fragment" data-fragment-index="2"></line>
                        <line x1="575" y1="105" x2="575" y2="95"
                              class="fragment" data-fragment-index="3"></line>
                    </g>
                    <g class="annotations">
                        <g class="fragment" data-fragment-index="1">
                            <text x="400" y="90">&frac12;</text>
                            <text x="400" y="145">8ve</text>
                        </g>
                        <g class="fragment" data-fragment-index="2">
                            <text x="516.66" y="90">&frac23;</text>
                            <text x="516.66" y="145">5te</text>
                        </g>
                        <g class="fragment" data-fragment-index="3">
                            <text x="575" y="90">&frac34;</text>
                            <text x="575" y="145">4te</text>
                        </g>


                    </g>

                </svg>

            </section>

        </section>
    </div>
</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>
<script src="lib/externals/wavesurfer.min.js"></script>

<script>
    // More info about config & dependencies:
    // - https://github.com/hakimel/reveal.js#configuration
    // - https://github.com/hakimel/reveal.js#dependencies
    Reveal.initialize({
        controls: true,
        //progress: true,
        history: true,
        //center: true,
        transition: 'slide', // none/fade/slide/convex/concave/zoom
        dependencies: [
            {
                src: 'plugin/markdown/marked.js', condition: function () {
                    return !!document.querySelector('[data-markdown]');
                },
            },
            {
                src: 'plugin/markdown/markdown.js', condition: function () {
                    return !!document.querySelector('[data-markdown]');
                },
            },
            {src: 'plugin/notes/notes.js', async: true},
            {
                src: 'plugin/highlight/highlight.js', async: true, callback: function () {
                    hljs.initHighlightingOnLoad();
                },
            },
            {
                src: 'plugin/audio-slideshow/audio-slideshow.js', condition: function () {
                    return !!document.body.classList;
                },
            },
        ],
        audio: {
            prefix: 'assets/', 	// audio files are stored in the "audio" folder
            suffix: '.mp3',		// audio files have the ".ogg" ending
            advance: -1,
            playerOpacity: 0.02,	// opacity value of audio player if unfocused
            playerStyle: 'position: fixed; bottom: 120px; right: -30px; width: 20%; height:50px; z-index: 33;', // style used for container of audio controls
            startAtFragment: true, // when moving to a slide, start at the current fragment or at the start of the slide
        },
    });

    // Wavesurfer

    // #1 SimpleWave
    const simpleWave = WaveSurfer.create({
        container: '#waveform',
        waveColor: 'violet',
        progressColor: 'purple',
        height: '300',
    });

    simpleWave.load('assets/plucked-bass.mp3');

    const playBtn = document.querySelector('#waveform');
    playBtn.onclick = () => simpleWave.play(0);
    const slider = document.querySelector('#slider');

    slider.oninput = function () {
        const zoomLevel = Number(slider.value);
        simpleWave.zoom(zoomLevel);
    };


    // Events fragments
    Reveal.addEventListener('fragmentshown', function (event) {
        //console.log(event.fragment);
        switch (event.fragment.id) {
            case 'waveform1':
                slider.value = 1;
                simpleWave.zoom(1);
                simpleWave.play(0);
                break;
            case 'waveform2':
                simpleWave.stop();
                slider.value = 4000;
                simpleWave.zoom(4000);
                break;
            default:
            //console.log(event.fragment.id);
        }

    });
    Reveal.addEventListener('fragmenthidden', function (event) {
        //console.log(event.fragment);
        switch (event.fragment.id) {
            case 'waveform1':
                simpleWave.zoom(1);
                simpleWave.play(0);
                break;
            case 'waveform2':
                simpleWave.play(0);
                break;
            default:
            // console.log(event.fragment.id);
        }

    });

</script>
</body>
</html>
